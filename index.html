<!DOCTYPE html>
<html>
<head>
  <link rel='stylesheet' href='style.css'>
  <link rel='stylesheet' href='ac.css'>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBAg4GcC7Wbi8HPsu903i-5jp4DAvH5b4&libraries=places"></script>
</head>
<body>
  <div class='banner'>
    <a href='https://github.com/danqing/autocomplete'>‚Üê Back to repo</a>
    <span id='maps'></span>
  </div>
  <div class='wrapper'>
    <div class='input-wrapper'>
      <h1>Location Search</h1>
      <input id='input' type='text' placeholder="Enter a location"></input>
      <p id='output'>Powered by Google Maps API.</p>
    </div>
  </div>
  <script type="text/javascript" src="ac.js"></script>
  <script>
    var service = new google.maps.places.PlacesService(
        document.getElementById('maps'));

    var requestFn = function(query) {
      if (!query) {
        ac.results = [];
        ac.render();
        return;
      }

      var callback = function(results, status) {
        if (status != google.maps.places.PlacesServiceStatus.OK) {
          ac.results = [];
        } else {
          ac.results = results.length > 5 ? results.slice(0, 5) : results;
        }
        ac.render();
      };
      service.textSearch({query: query}, callback);
    };

    var triggerFn = function(obj) {
      var output = document.getElementById('output');
      output.textContent = 'You selected ' + obj.name;
    };

    var input = document.getElementById('input');
    var ac = new AC(input, null, requestFn, null, null, triggerFn);
    ac.primaryTextKey = 'name';
    ac.secondaryTextKey = 'formatted_address';
  </script>
</body>
</html>
